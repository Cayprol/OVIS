<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record model="ir.ui.view" id="inherit_view_picking_form">
			<field name="model">stock.picking</field>
			<field name="name">inherit.stock.picking.form</field>
			<field name="inherit_id" ref="stock.view_picking_form"/>
			<field name="arch" type="xml">

				<xpath expr="//button[@name='action_confirm']" position="attributes">
					<attribute name="groups">stock.group_stock_manager</attribute>
				</xpath>

				<!-- Force to enter reason of canceling -->
				<xpath expr="//button[@name='action_cancel']" position="replace">
					<button name="action_cancel_confirm" attrs="{'invisible': ['|', ('state', 'not in', ('assigned', 'confirmed', 'partially_available', 'draft', 'waiting')), ('is_locked', '=', False)]}" string="Cancel" groups="stock.group_stock_manager,purchase.group_purchase_user" type="object"/>
					<!-- <attribute name="groups">stock.group_stock_manager,purchase.group_purchase_user</attribute> -->
				</xpath>


				<!-- Add net weight and gross weight to tree view -->
				<xpath expr="//field[@name='move_ids_without_package']//tree//button[@name='action_show_details']" position="before">
					<field name="net_weight"/>
					<field name="gross_weight"/>
					<!-- <field name="gross_weight" attrs="{'readonly': [('is_quantity_done_editable', '=', False)]}"/> -->
				</xpath>

				<!-- Add attribute to validate net weight and gross weight in tree view to turn red in each line -->
				<xpath expr="//field[@name='move_ids_without_package']//tree" position="attributes">
					<attribute name="decoration-danger" add="net_weight > gross_weight" separator=" or "/>
				</xpath>

				<!-- Add selection of forwarders -->
				<xpath expr="//field[@name='origin']" position="after">
					<field name="purchase_id"/>
					<field name="forwarder_id"/>
				</xpath>
				
			</field>
		</record>
	</data>
</odoo>